{% extends "index.html" %}
{% block content %}
<div class="container my-5">
  <!-- Hero Section -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="card border-0 shadow-sm rounded-4 p-5 text-center" style="background: linear-gradient(135deg, #ff6b6b, #ffa500);">
        <h1 class="display-4 fw-bold text-white mb-3">üî• Hot Deals</h1>
        <p class="lead text-white mb-0">Limited time offers on premium products!</p>
      </div>
    </div>
  </div>

  <!-- Hot Deals Products -->
  {% if hot_products %}
  <div class="row g-4">
    {% for product in hot_products %}
    <div class="col-sm-6 col-md-4 col-lg-3">
      <div class="card product-card h-100 position-relative">
        <!-- Hot Deal Badge -->
        <div class="position-absolute top-0 end-0 m-2">
          <span class="badge bg-danger">HOT DEAL</span>
        </div>
        
        <!-- Favorite Button -->
        <div class="favorite-btn" onclick="this.classList.toggle('active')">
          ‚ù§Ô∏è
        </div>

        <!-- Image Container -->
        <div class="product-img-container">
          <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
        </div>

        <div class="card-body d-flex flex-column justify-content-between">
          <div>
            <h5 class="card-title">{{ product.name }}</h5>
            <p class="card-text small text-muted">
              {{ product.description|linebreaksbr|truncatechars:80 }}
            </p>
            <p class="fw-bold text-green">‚Çπ{{ product.price }}</p>
            <span class="badge bg-gold text-dark">{{ product.product_type }}</span>
            <p class="text-success small">Return: {{ product.return_policy }}</p>
            <p class="text-muted small">By: {{ product.seller.sellerprofile.shop_name }}</p>
          </div>
          <div class="mt-3 d-flex gap-2 flex-wrap">
            <a href="{% url 'product_detail' product.id %}" class="btn premium-btn w-100">View Details</a>
            {% if user.is_authenticated and user.role == 'buyer' %}
            <form method="POST" action="{% url 'add_to_cart' product.id %}" class="w-100">
              {% csrf_token %}
              <button type="submit" class="btn premium-outline-btn w-100">Add to Cart</button>
            </form>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="row">
    <div class="col-12">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-5 text-center">
          <i class="fas fa-fire text-muted" style="font-size: 4rem;"></i>
          <h4 class="mt-4 mb-3">No hot deals available</h4>
          <p class="text-muted mb-4">Check back later for amazing deals!</p>
          <a href="{% url 'index' %}" class="btn premium-btn">Browse All Products</a>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>

<!-- Add Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock content %}