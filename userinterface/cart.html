{% extends "index.html" %}
{% block content %}
<div class="container my-5">
  <div class="row">
    <div class="col-12">
      <h2 class="section-heading mb-4">Shopping Cart</h2>
    </div>
  </div>

  {% if cart_items %}
  <div class="row">
    <!-- Cart Items -->
    <div class="col-md-8">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-4">
          {% for item in cart_items %}
          <div class="row align-items-center py-3 {% if not forloop.last %}border-bottom{% endif %}">
            <div class="col-md-2">
              {% if item.product.image %}
              <img src="{{ item.product.image.url }}" class="img-fluid rounded" alt="{{ item.product.name }}">
              {% endif %}
            </div>
            <div class="col-md-4">
              <h6 class="fw-bold">{{ item.product.name }}</h6>
              <p class="text-muted small mb-0">{{ item.product.product_type }}</p>
              <p class="text-muted small">Sold by: {{ item.product.seller.sellerprofile.shop_name }}</p>
            </div>
            <div class="col-md-2">
              <span class="fw-bold">₹{{ item.product.price }}</span>
            </div>
            <div class="col-md-2">
              <div class="input-group input-group-sm">
                <button class="btn btn-outline-secondary" type="button">-</button>
                <input type="text" class="form-control text-center" value="{{ item.quantity }}" readonly>
                <button class="btn btn-outline-secondary" type="button">+</button>
              </div>
            </div>
            <div class="col-md-1">
              <span class="fw-bold">₹{{ item.get_total_price }}</span>
            </div>
            <div class="col-md-1">
              <a href="{% url 'remove_from_cart' item.id %}" class="btn btn-sm btn-outline-danger">
                <i class="fas fa-trash"></i>
              </a>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Order Summary -->
    <div class="col-md-4">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-4">
          <h5 class="fw-bold mb-4">Order Summary</h5>
          <div class="d-flex justify-content-between mb-2">
            <span>Subtotal:</span>
            <span>₹{{ total }}</span>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>Shipping:</span>
            <span>Free</span>
          </div>
          <hr>
          <div class="d-flex justify-content-between mb-4">
            <span class="fw-bold">Total:</span>
            <span class="fw-bold">₹{{ total }}</span>
          </div>
          
          <!-- Checkout Form -->
          <form method="POST" action="{% url 'create_order' %}">
            {% csrf_token %}
            <div class="mb-3">
              <label class="form-label fw-semibold">Shipping Address</label>
              <textarea name="shipping_address" class="form-control" rows="3" placeholder="Enter your complete address" required></textarea>
            </div>
            <button type="submit" class="btn premium-btn w-100">
              <i class="fas fa-credit-card me-2"></i>Place Order
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% else %}
  <!-- Empty Cart -->
  <div class="row">
    <div class="col-12">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-5 text-center">
          <i class="fas fa-shopping-cart text-muted" style="font-size: 4rem;"></i>
          <h4 class="mt-4 mb-3">Your cart is empty</h4>
          <p class="text-muted mb-4">Looks like you haven't added any items to your cart yet.</p>
          <a href="{% url 'index' %}" class="btn premium-btn">
            <i class="fas fa-store me-2"></i>Continue Shopping
          </a>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>

<!-- Add Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock content %}